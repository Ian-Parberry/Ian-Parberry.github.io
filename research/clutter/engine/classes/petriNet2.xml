<net>
    <page name="START">
        <place name="START" />

        <place name="EdgePlace" />
        <place name="CornerPlace" />
        <place name="CenterPlace" />

        <place name="TVControl" tokens="1" scope="Global" />
        <place name="TVFinished" scope="Global" />

        <trans name="SortEdge" p="1">
            <edge in="START" out="EdgePlace" type="EDGE" />
        </trans>
        <trans name="SortCorner" p="1">
            <edge in="START" out="CornerPlace" type="CORNER" />
        </trans>
        <trans name="SortCenter" p="1">
            <edge in="START" out="CenterPlace" type="CENTER" />
        </trans>

        <place name="TableControl" tokens="1" />
        <place name="TableStuff" />

        <trans name="BuildTable1">
            <edge in="TableControl" />
            <edge in="TVFinished" out="TVFinished" />
            <edge in="CenterPlace" out="TableStuff" object="Table1" sdp="5" sda="5" />
        </trans>
        <trans name="BuildTable2">
            <edge in="TableControl" />
            <edge in="TVFinished" out="TVFinished" />
            <edge in="CenterPlace" out="TableStuff" object="Table2" sdp="5" sda="5"  />
        </trans>
        <trans name="BuildTable3">
            <edge in="TableControl" />
            <edge in="TVFinished" out="TVFinished" />
            <edge in="CenterPlace" out="TableStuff" object="Table3" sdp="5" sda="5" />
        </trans>
        <trans name="BuildTable4">
            <edge in="TableControl" />
            <edge in="TVFinished" out="TVFinished" />
            <edge in="CenterPlace" out="TableStuff" object="Table4" sdp="5" sda="5"  />
        </trans>

        <place name="TVTemp" />

        <trans name="MakeTVPlace">
            <edge in="TVControl" out="TVFinished" />
            <edge in="EdgePlace" out="TVTemp" />
        </trans>

        <call target="CornerClutter">
            <assoc link="INPUT" place="CornerPlace" />
        </call>
        <call target="TableClutter">
            <assoc link="INPUT" place="TableStuff" />
        </call>
        <call target="TVPage">
            <assoc link="INPUT" place="TVTemp" />
        </call>
    </page>

    <page name="TableClutter">
        <link name="INPUT" />

        <place name="ChairSort" />
        <place name="TopSort" />
        <place name="Clutter" />

        <trans name="SortChairs">
            <edge in="INPUT" out="ChairSort" type="Chair" />
        </trans>
        <trans name="SortTop1">
            <edge in="INPUT" out="TopSort" type="Top" />
        </trans>
        <trans name="SortTop2">
            <edge in="INPUT" out="TopSort" type="TopCenter" />
        </trans>

        <place name="ChairControl" tokens="1" />
        <place name="ChairAllow1" />
        <place name="ChairAllow2" />

        <trans name="AllowChair1">
            <edge in="ChairControl" out="ChairAllow1" />
        </trans>
        <trans name="AllowChair2">
            <edge in="ChairControl" out="ChairAllow2" />
        </trans>

        <trans name="BuildChair1">
            <edge in="ChairAllow1" out="ChairAllow1" />
            <edge in="ChairSort" object="Chair1" sdp="1" sda="3" />
        </trans>
        <trans name="BuildChair2">
            <edge in="ChairAllow2" out="ChairAllow2" />
            <edge in="ChairSort" object="Chair2" sdp="1" sda="3" />
        </trans>

        <place name="MatTypeControl" tokens="1" />
        <place name="Mat1Allow" />
        <place name="Mat2Allow" />

        <trans name="AllowMat1">
            <edge in="MatTypeControl" out="Mat1Allow" />
        </trans>
        <trans name="AllowMat2">
            <edge in="MatTypeControl" out="Mat2Allow" />
        </trans>

        <place name="Place" />

        <trans name="MakeClutter">
            <edge in="TopSort" out="Clutter" />
        </trans>
        <trans name="MakePlace1">
            <edge in="Mat1Allow" out="Mat1Allow" />
            <edge in="TopSort" out="Place" type="Top" object="PlaceMat1" sdp="1" sda="2" />
        </trans>
        <trans name="MakePlace2">
            <edge in="Mat2Allow" out="Mat2Allow" />
            <edge in="TopSort" out="Place" type="Top" object="PlaceMat2" sdp="1" sda="2" />
        </trans>

        <trans name="MakePlate">
            <edge in="Place" object="Plate2" sdp="2" />
        </trans>
        <trans name="PlaceClutter">
            <edge in="Place" out="Clutter" />
        </trans>

        <call target="GeneralClutter">
            <assoc link="INPUT" place="Clutter" />
        </call>
    </page>

    <page name="CornerClutter">
        <link name="INPUT" />


        <place name="TVControl" tokens="1" scope="Global" />
        <place name="TVFinished" scope="Global" />

        <place name="TVTemp" />
        <place name="Other" />

        <trans name="MakeTVArea">
            <edge in="TVControl" out="TVFinished" />
            <edge in="INPUT" out="TVTemp" />
        </trans>

        <trans name="OtherClutter">
            <edge in="TVFinished" out="TVFinished" />
            <edge in="INPUT" out="Other" />
        </trans>

        <place name="Edge32Stuff" />

        <trans name="AdjustCorner1" p="0.5">
            <edge in="TVFinished" out="TVFinished" />
            <edge in="INPUT" out="Edge32Stuff" object="Edge32ToCorner1" />
        </trans>
        <trans name="AdjustCorner2" p="0.5">
            <edge in="TVFinished" out="TVFinished" />
            <edge in="INPUT" out="Edge32Stuff" object="Edge32ToCorner2" />
        </trans>

        <place name="DrawersStuff" />
        <place name="DrawersClutter" />

        <trans name="BuildDrawers">
            <edge in="Edge32Stuff" out="DrawersStuff" object="Drawers1" />
        </trans>
        <trans name="SortTop">
            <edge in="DrawersStuff" out="DrawersClutter" type="Top" />
        </trans>
        <trans name="SortCorner">
            <edge in="DrawersStuff" out="INPUT" type="Corner" />
        </trans>

        <call target="GeneralClutter">
            <assoc link="INPUT" place="DrawersClutter" />
        </call>
        <call target="TVPage">
            <assoc link="INPUT" place="TVTemp" />
        </call>
        <call target="CornerClutter2">
            <assoc link="INPUT" place="Other" />
        </call>
    </page>

    <page name="CornerClutter2">
        <link name="INPUT" />

        <place name="TVControl" tokens="1" scope="Global" />
        <place name="TVFinished" scope="Global" />

        <trans name="SkipCorner" p="0.0025">
            <edge in="TVFinished" out="TVFinished" />
            <edge in="INPUT" />
        </trans>
        <trans name="BuildLamp" p="0.75">
            <edge in="TVFinished" out="TVFinished" />
            <edge in="INPUT" object="Lamp1Corner" />
        </trans>

        <place name="Urns" />

        <trans name="AdjustCorner3" p="0.8">
            <edge in="TVFinished" out="TVFinished" />
            <edge in="INPUT" out="Urns" object="CornerShift16" />
        </trans>

        <trans name="MakeUrn1">
            <edge in="Urns" object="Urn1" />
        </trans>
        <trans name="MakeUrn2">
            <edge in="Urns" object="Urn2" />
        </trans>

        <place name="Plant" />

        <trans name="MakePlant" p="0.1">
            <edge in="TVFinished" out="TVFinished" />
            <edge in="INPUT" out="Plant" object="CornerShift8" />
        </trans>

        <call target="PottedPlants">
            <assoc link="INPUT" place="Plant" />
        </call>
    </page>

    <page name="GeneralClutter">
        <link name="INPUT" />

        <place name="PaperPile" />

        <trans name="Skip" p="0.8">
            <edge in="INPUT" />
        </trans>

        <trans name="CreateMug" p="0.5">
            <edge in="INPUT" object="Mug1" sdp="3" sda="360" />
        </trans>
        <trans name="MakeCandle1" p="0.5">
            <edge in="INPUT" object="Candles1" sdp="3" sda="360" />
        </trans>
        <trans name="MakeCandle2" p="0.5">
            <edge in="INPUT" object="Candles2" sdp="3" sda="360" />
        </trans>
        <trans name="MakeBottle">
            <edge in="INPUT" object="Bottle1" sdp="3" sda="360" />
        </trans>
        <trans name="MakeBook1" p="0.5">
            <edge in="INPUT" object="Book1" sdp="3" sda="10" />
        </trans>
        <trans name="MakeBook2" p="0.5">
            <edge in="INPUT" object="Book2" sdp="3" sda="10" />
        </trans>
        <trans name="MakeBook3" p="0.5">
            <edge in="INPUT" object="Book3" sdp="3" sda="10" />
        </trans>

        <trans name="StartPaper">
            <edge in="INPUT" out="PaperPile" />
        </trans>

        <trans name="ContinuePile1">
            <edge in="PaperPile" out="PaperPile" object="Paper1" sdp="1" sda="3" />
        </trans>
        <trans name="ContinuePile2">
            <edge in="PaperPile" out="PaperPile" object="Paper2" sdp="1" sda="3" />
        </trans>
        <trans name="EndPile" p="0.7">
            <edge in="PaperPile" />
        </trans>

        <place name="Plant" />

        <trans name="MakePlant" p="0.1">
            <edge in="INPUT" out="Plant" />
        </trans>

        <call target="PottedPlants">
            <assoc link="INPUT" place="Plant" />
        </call>
    </page>

    <page name="PottedPlants">
        <link name="INPUT" />

        <trans name="MakePlant1">
            <edge in="INPUT" object="PottedPlant1" sdp="1" sda="360" />
        </trans>
        <trans name="MakePlant2">
            <edge in="INPUT" object="PottedPlant2" sdp="1" sda="360" />
        </trans>
        <trans name="MakePlant3">
            <edge in="INPUT" object="PottedPlant3" sdp="1" sda="360" />
        </trans>
        <trans name="MakePlant4">
            <edge in="INPUT" object="PottedPlant4" sdp="1" sda="360" />
        </trans>
    </page>

    <page name="TVPage">
        <link name="INPUT" />

        <place name="Stuff" />

        <trans name="CornerAdjust1">
            <edge in="INPUT" out="INPUT" object="Edge64ToCorner1" type="CORNER" />
        </trans>
        <trans name="CornerAdjust2">
            <edge in="INPUT" out="INPUT" object="Edge64ToCorner2" type="CORNER" />
        </trans>

        <trans name="EdgeOK">
            <edge in="INPUT" out="Stuff" type="EDGE" object="TVArea" />
        </trans>
        <trans name="TopOK">
            <edge in="INPUT" out="Stuff" type="Top" object="TVArea" />
        </trans>

        <place name="CouchControl" tokens="1" />
        <place name="Couch1Allow" />
        <place name="Couch2Allow" />

        <trans name="AllowCouch1">
            <edge in="CouchControl" out="Couch1Allow" />
        </trans>
        <trans name="AllowCouch2">
            <edge in="CouchControl" out="Couch2Allow" />
        </trans>

        <place name="TVStuff" />
        <place name="CouchStuff" />
        <place name="CoffeeStuff" />

        <trans name="MakeTV">
            <edge in="Stuff" out="TVStuff" type="TVSpot" object="TV" />
        </trans>

        <trans name="MakeCoffee1">
            <edge in="Stuff" out="CoffeeStuff" type="Table" object="CoffeeTable1" sdp="1" sda="3" />
        </trans>
        <trans name="MakeCoffee2">
            <edge in="Stuff" out="CoffeeStuff" type="Table" object="CoffeeTable2" sdp="1" sda="3" />
        </trans>

        <trans name="MakeCouch1">
            <edge in="Couch1Allow" out="Couch1Allow" />
            <edge in="Stuff" out="CouchStuff" type="Couch" object="Couch1" sdp="1" sda="3" />
        </trans>
        <trans name="MakeCouch2">
            <edge in="Couch2Allow" out="Couch2Allow" />
            <edge in="Stuff" out="CouchStuff" type="Couch" object="Couch2" sdp="1" sda="3" />
        </trans>
        <trans name="MakeLoveseat1">
            <edge in="Couch1Allow" out="Couch1Allow" />
            <edge in="Stuff" out="CouchStuff" type="Couch" object="Loveseat1" sdp="1" sda="3" />
        </trans>
        <trans name="MakeLoveseat2">
            <edge in="Couch2Allow" out="Couch2Allow" />
            <edge in="Stuff" out="CouchStuff" type="Couch" object="Loveseat2" sdp="1" sda="3" />
        </trans>
        <trans name="MakeChair1">
            <edge in="Couch1Allow" out="Couch1Allow" />
            <edge in="Stuff" type="Chair" object="Armchair1" sdp="1" sda="3" />
        </trans>
        <trans name="MakeChair2">
            <edge in="Couch2Allow" out="Couch2Allow" />
            <edge in="Stuff" type="Chair" object="Armchair2" sdp="1" sda="3" />
        </trans>

        <trans name="MakeEndTable1">
            <edge in="CouchStuff" out="CoffeeStuff" object="EndTable1" />
        </trans>
        <trans name="MakeEndTable2">
            <edge in="CouchStuff" out="CoffeeStuff" object="EndTable2" />
        </trans>

        <call target="GeneralClutter">
            <assoc link="INPUT" place="CoffeeStuff" />
        </call>
        <call target="CornerClutter2">
            <assoc link="INPUT" place="TVStuff" />
        </call>
    </page>
</net>