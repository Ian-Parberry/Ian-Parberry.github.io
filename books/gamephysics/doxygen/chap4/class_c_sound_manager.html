<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>Ball and Spring Toy: CSoundManager Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="balls and springs.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Ball and Spring Toy
   </div>
   <div id="projectbrief">Chapter 4 of Ian Parberry&#39;s &quot;Introduction to Game Physics with Box2D&quot;</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="class_c_sound_manager-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">CSoundManager Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The sound manager.  
 <a href="class_c_sound_manager.html#details">More...</a></p>

<p><code>#include &lt;Sound.h&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab479f8ff640421016db7ca5d27521325"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_sound_manager.html#ab479f8ff640421016db7ca5d27521325">CSoundManager</a> (HWND hwnd)</td></tr>
<tr class="memdesc:ab479f8ff640421016db7ca5d27521325"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#ab479f8ff640421016db7ca5d27521325"></a><br/></td></tr>
<tr class="separator:ab479f8ff640421016db7ca5d27521325"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a75bc0ad3cc339baeb29372632c02f5f2"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_sound_manager.html#a75bc0ad3cc339baeb29372632c02f5f2">~CSoundManager</a> ()</td></tr>
<tr class="memdesc:a75bc0ad3cc339baeb29372632c02f5f2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Destructor.  <a href="#a75bc0ad3cc339baeb29372632c02f5f2"></a><br/></td></tr>
<tr class="separator:a75bc0ad3cc339baeb29372632c02f5f2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafe37548abd0d64f9b29e4c92dc2d534"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_sound_manager.html#aafe37548abd0d64f9b29e4c92dc2d534">LoadSettings</a> ()</td></tr>
<tr class="memdesc:aafe37548abd0d64f9b29e4c92dc2d534"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load settings from XML document.  <a href="#aafe37548abd0d64f9b29e4c92dc2d534"></a><br/></td></tr>
<tr class="separator:aafe37548abd0d64f9b29e4c92dc2d534"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57a395df1d1b318017a529b40a6bbda6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_sound_manager.html#a57a395df1d1b318017a529b40a6bbda6">LoadSounds</a> (int level=0)</td></tr>
<tr class="memdesc:a57a395df1d1b318017a529b40a6bbda6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load sounds from list in XML document.  <a href="#a57a395df1d1b318017a529b40a6bbda6"></a><br/></td></tr>
<tr class="separator:a57a395df1d1b318017a529b40a6bbda6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a05a9809544a81dd63a22c52e09b331c6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_sound_manager.html#a05a9809544a81dd63a22c52e09b331c6">beginframe</a> (void)</td></tr>
<tr class="memdesc:a05a9809544a81dd63a22c52e09b331c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">To be called at start of frame.  <a href="#a05a9809544a81dd63a22c52e09b331c6"></a><br/></td></tr>
<tr class="separator:a05a9809544a81dd63a22c52e09b331c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8c24e75e6f6930e472bf9a244431154b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_sound_manager.html#a8c24e75e6f6930e472bf9a244431154b">clear</a> ()</td></tr>
<tr class="memdesc:a8c24e75e6f6930e472bf9a244431154b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Clear all sounds from buffers.  <a href="#a8c24e75e6f6930e472bf9a244431154b"></a><br/></td></tr>
<tr class="separator:a8c24e75e6f6930e472bf9a244431154b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab75680163493a1f0866f3c2ca876db20"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_sound_manager.html#ab75680163493a1f0866f3c2ca876db20">load</a> (char *filename, int copies=1)</td></tr>
<tr class="memdesc:ab75680163493a1f0866f3c2ca876db20"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load sound from file.  <a href="#ab75680163493a1f0866f3c2ca876db20"></a><br/></td></tr>
<tr class="separator:ab75680163493a1f0866f3c2ca876db20"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a081ddd4768c845dd7d8ea8496f5e03f8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_sound_manager.html#a081ddd4768c845dd7d8ea8496f5e03f8">play</a> (int index, BOOL looping=FALSE)</td></tr>
<tr class="memdesc:a081ddd4768c845dd7d8ea8496f5e03f8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Play sound.  <a href="#a081ddd4768c845dd7d8ea8496f5e03f8"></a><br/></td></tr>
<tr class="separator:a081ddd4768c845dd7d8ea8496f5e03f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a77bfeb4369f6aa929b91a55c35548ac7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_sound_manager.html#a77bfeb4369f6aa929b91a55c35548ac7">stop</a> (int index)</td></tr>
<tr class="memdesc:a77bfeb4369f6aa929b91a55c35548ac7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop playing sound.  <a href="#a77bfeb4369f6aa929b91a55c35548ac7"></a><br/></td></tr>
<tr class="separator:a77bfeb4369f6aa929b91a55c35548ac7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe29c83f4dd6895264cde6f23a0f6dfc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_c_sound_manager.html#abe29c83f4dd6895264cde6f23a0f6dfc">stop</a> (void)</td></tr>
<tr class="memdesc:abe29c83f4dd6895264cde6f23a0f6dfc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stop playing all sounds.  <a href="#abe29c83f4dd6895264cde6f23a0f6dfc"></a><br/></td></tr>
<tr class="separator:abe29c83f4dd6895264cde6f23a0f6dfc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>The sound manager. </p>
<p>The sound manager lets you play multiple overlapping copies of sounds simultaneously. It reads settings from the XML settings file, including a list of file names to be loaded. It can load WAV format sounds. The code is currently written so that all sound files must have the same bit depth and sample rate. Multiple copies of sounds are made by sharing the sound data, to save memory. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ab479f8ff640421016db7ca5d27521325"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSoundManager::CSoundManager </td>
          <td>(</td>
          <td class="paramtype">HWND&#160;</td>
          <td class="paramname"><em>hwnd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<p><a class="el" href="class_c_sound_manager.html" title="The sound manager.">CSoundManager</a> constructor. Sets member variables to sensible values and starts DirectSound. Member variable m_bOperational is set to TRUE is it is able to start DirectSound and set the cooperative level correctly. </p>

</div>
</div>
<a class="anchor" id="a75bc0ad3cc339baeb29372632c02f5f2"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">CSoundManager::~CSoundManager </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Destructor. </p>
<p><a class="el" href="class_c_sound_manager.html" title="The sound manager.">CSoundManager</a> destructor. Reclaims all dynamic memory and releases DirectSound. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a05a9809544a81dd63a22c52e09b331c6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSoundManager::beginframe </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>To be called at start of frame. </p>
<p>Record the start of a new animation frame by resetting the array m_bStartedThisFrame. If two copies of the same sound start at exactly the same time (meaning in the same frame of animation), then the two sounds reinforce each other. That is, the sound simply plays twice as loud. m_bStartedThisFrame is used to prevent this from happening. If a sound has already been started, it cannot be started again until this function has been called. </p>

</div>
</div>
<a class="anchor" id="a8c24e75e6f6930e472bf9a244431154b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSoundManager::clear </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Clear all sounds from buffers. </p>
<p>Clear the sound manager. Return the sound manager to a pristine state by releasing and deleting all sound buffers, then deletie all dynamic arrays. </p>

</div>
</div>
<a class="anchor" id="ab75680163493a1f0866f3c2ca876db20"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSoundManager::load </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>filename</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>copies</em> = <code>1</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load sound from file. </p>
<p>Load a sound from a file into a sound buffer. Loads a sound from a file into a temporary buffer. Creates a DirectSound sound buffer of the right size and copies it over. Creates a number of copies of the sound so that we can play overlapping copies of the sound. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">filename</td><td>name of file to be loaded </td></tr>
    <tr><td class="paramname">copies</td><td>number of copies of sound that can be played simultaneously </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="aafe37548abd0d64f9b29e4c92dc2d534"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSoundManager::LoadSettings </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load settings from XML document. </p>
<p>Load the basic sound settings from g_xmlSettings. Looks for a &lt;sound&gt; tag with attributes cps, bps, and rate. </p>

</div>
</div>
<a class="anchor" id="a57a395df1d1b318017a529b40a6bbda6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSoundManager::LoadSounds </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>level</em> = <code>0</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load sounds from list in XML document. </p>
<p>Load the sound files for a given level from the xml file list in g_xmlSettings. Search for a &lt;sounds&gt; tag with a "level" attribute equal to the parameter. Process sound file names in &lt;sound&gt; tags within the &lt;sounds&gt;&lt;/sounds&gt; pair. Starts by counting the number of sound files needed, and creating arrays of the right size. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">level</td><td>sounds are to be loaded for this level </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a081ddd4768c845dd7d8ea8496f5e03f8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSoundManager::play </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">BOOL&#160;</td>
          <td class="paramname"><em>looping</em> = <code>FALSE</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Play sound. </p>
<p>If the sound has multiple copies, locates a copy that is not currently playing, and plays it. If there is no copy available, nothing happens. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>index of sound to be played </td></tr>
    <tr><td class="paramname">looping</td><td>TRUE if sound is to be looped </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a77bfeb4369f6aa929b91a55c35548ac7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSoundManager::stop </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>index</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop playing sound. </p>
<p>Stop all copies of a sound from playing, and reset them back to the start of the sound so that they start properly next time they are played. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">index</td><td>index of sound to stop </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abe29c83f4dd6895264cde6f23a0f6dfc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CSoundManager::stop </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stop playing all sounds. </p>
<p>Stop all sounds from playing. It simply loops through all sounds and calls the other stop function to do all the work. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 19 2012 15:15:45 for Ball and Spring Toy by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
